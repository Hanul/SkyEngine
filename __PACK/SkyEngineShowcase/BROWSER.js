SkyEngineShowcase.MAIN=METHOD({run:e=>{SkyEngineShowcase.MATCH_VIEW({uri:"",target:SkyEngineShowcase.MainMenu}),SkyEngineShowcase.MATCH_VIEW({uri:"hello",target:SkyEngineShowcase.HelloSkyEngine}),SkyEngineShowcase.MATCH_VIEW({uri:"test/draw",target:SkyEngineShowcase.DrawTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/node",target:SkyEngineShowcase.NodeTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/moving",target:SkyEngineShowcase.MovingTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/scaling",target:SkyEngineShowcase.ScalingTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/rotation",target:SkyEngineShowcase.RotationTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/fading",target:SkyEngineShowcase.FadingTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/filter",target:SkyEngineShowcase.FilterTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/blendmode",target:SkyEngineShowcase.BlendModeTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/event",target:SkyEngineShowcase.EventTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/collision",target:SkyEngineShowcase.CollisionTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/intersection",target:SkyEngineShowcase.IntersectionTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/performance",target:SkyEngineShowcase.PerformanceTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/raycast",target:SkyEngineShowcase.RaycastTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/hitscan",target:SkyEngineShowcase.HitscanShootingTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/projectile",target:SkyEngineShowcase.ProjectileShootingTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/tilemap",target:SkyEngineShowcase.TileMapTest}),SkyEngineShowcase.MATCH_VIEW({uri:"test/particle",target:SkyEngineShowcase.ParticleTest})}}),SkyEngineShowcase.BlendModeTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Rect({width:300,height:200,color:"blue"}).appendTo(SkyEngine.Screen),t=SkyEngine.Circle({width:300,height:200,color:"yellow"}).appendTo(SkyEngine.Screen),o=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.2,alpha:.5}).appendTo(SkyEngine.Screen);t.setBlendMode("multiply"),e.on("close",()=>{n.remove(),t.remove(),o.remove(),SkyEngine.Screen.removeFilter()})}}),SkyEngineShowcase.CollisionTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Line({y:-140,startX:-100,startY:-10,endX:100,endY:10,border:"5px solid red"}).appendTo(SkyEngine.Screen);n.addCollider(SkyEngine.Line({startX:-100,startY:-10,endX:100,endY:10}));let t=SkyEngine.Rect({x:-50,y:80,width:60,height:40,color:"green",scale:1.2,angle:45,on:{touchstart:()=>{console.log("This is Rect!")}}}).appendTo(SkyEngine.Screen);t.addCollider(SkyEngine.Rect({width:60,height:40,c:SkyEngine.Rect({width:40,height:60})}));let o=SkyEngine.Circle({x:50,y:-50,width:60,height:40,color:"yellow",scale:1.2,angle:45,on:{touchstart:()=>{console.log("This is Circle!")}}}).appendTo(SkyEngine.Screen);o.addCollider(SkyEngine.Circle({width:60,height:40,c:SkyEngine.Circle({width:40,height:60})})),o.onMeet(SkyEngine.Line,()=>{console.log("Met Line!")}),o.onPart(SkyEngine.Line,()=>{console.log("Parted Line!")}),o.onMeet(SkyEngine.Rect,()=>{console.log("Met Rect!")}),o.onPart(SkyEngine.Rect,()=>{console.log("Parted Rect!")}),o.onMeet(SkyEngine.Polygon,()=>{console.log("Met Polygon!")}),o.onPart(SkyEngine.Polygon,()=>{console.log("Parted Polygon!")});let i=SkyEngine.Polygon({x:100,y:80,points:[{x:-30,y:50},{x:50,y:40},{x:20,y:-50}],color:"yellow",scale:.7,angle:-45,on:{touchstart:()=>{console.log("This is Polygon!")}}}).appendTo(SkyEngine.Screen);i.addCollider(SkyEngine.Polygon({points:[{x:-30,y:50},{x:50,y:40},{x:20,y:-50}],c:SkyEngine.Polygon({points:[{x:30,y:-50},{x:-50,y:-40},{x:-20,y:50}]})})),o.moveRight(100);let r=DELAY(1,()=>{o.stopRight(),o.moveDown(100),r=DELAY(1,()=>{o.flipX(),o.stopDown(),o.moveLeft(100);let e=RAR(()=>{r=DELAY(2,()=>{o.stopLeft(),o.moveUp(100),r=DELAY(2,()=>{o.flipX(),o.stopUp(),o.moveRight(100),r=DELAY(2,()=>{o.stopRight(),o.moveDown(100),r=DELAY(2,()=>{o.flipX(),o.stopDown(),o.moveLeft(100),e()})})})})})})});e.on("close",()=>{n.remove(),t.remove(),o.remove(),i.remove(),r.remove()})}}),SkyEngineShowcase.DrawTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Line({y:-140,startX:-100,startY:-10,endX:100,endY:10,border:"5px solid red"}).appendTo(SkyEngine.Screen),t=SkyEngine.Rect({width:300,height:200,color:"green"}).appendTo(SkyEngine.Screen),o=SkyEngine.Circle({width:300,height:200,color:"yellow"}).appendTo(SkyEngine.Screen),i=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.2}).appendTo(SkyEngine.Screen);e.on("close",()=>{n.remove(),t.remove(),o.remove(),i.remove()})}}),SkyEngineShowcase.EventTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Rect({x:-50,y:-50,width:60,height:40,color:"green",scale:1.2,angle:45,on:{touchstart:()=>{console.log("This is Rect!")}}}).appendTo(SkyEngine.Screen);n.addTouchArea(SkyEngine.Rect({width:60,height:40,c:SkyEngine.Rect({width:40,height:60})}));let t=SkyEngine.Circle({x:50,y:-50,width:60,height:40,color:"yellow",scale:1.2,angle:45,on:{touchstart:()=>{console.log("This is Circle!")},offscreen:()=>{console.log("Offscreen!")}}}).appendTo(SkyEngine.Screen);t.moveRight(100);let o=DELAY(5,()=>{t.stopRight(),t.moveDown(100),o=DELAY(5,()=>{t.flipX(),t.stopDown(),t.moveLeft(100);let e=RAR(()=>{o=DELAY(5,()=>{t.stopLeft(),t.moveUp(100),o=DELAY(5,()=>{t.flipX(),t.stopUp(),t.moveRight(100),o=DELAY(5,()=>{t.stopRight(),t.moveDown(100),o=DELAY(5,()=>{t.flipX(),t.stopDown(),t.moveLeft(100),e()})})})})})})});t.addTouchArea(SkyEngine.Circle({width:60,height:40,c:SkyEngine.Circle({width:40,height:60})}));let i=SkyEngine.Polygon({x:-50,y:50,points:[{x:-30,y:50},{x:50,y:40},{x:20,y:-50}],color:"yellow",scale:.7,angle:-45,on:{touchstart:()=>{console.log("This is Polygon!")}}}).appendTo(SkyEngine.Screen);i.addTouchArea(SkyEngine.Polygon({points:[{x:-30,y:50},{x:50,y:40},{x:20,y:-50}],c:SkyEngine.Polygon({points:[{x:30,y:-50},{x:-50,y:-40},{x:-20,y:50}]})}));let r=SkyEngine.Silhouette({src:SkyEngineShowcase.R("robot/run1.png"),x:50,y:50,fps:10,scale:.2,angle:45,color:"green",on:{touchstart:()=>{console.log("This is Silhouette!")}}}).appendTo(SkyEngine.Screen);r.addTouchArea(SkyEngine.Silhouette({src:SkyEngineShowcase.R("robot/run1.png")})),e.on("close",()=>{n.remove(),t.remove(),i.remove(),r.remove(),o.remove()})}}),SkyEngineShowcase.FadingTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.5}).appendTo(SkyEngine.Screen);n.fadeOut(1),e.on("close",()=>{n.remove()})}}),SkyEngineShowcase.FilterTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Rect({width:300,height:200,color:"green"}).appendTo(SkyEngine.Screen),t=SkyEngine.Circle({width:300,height:200,color:"yellow"}).appendTo(SkyEngine.Screen),o=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.2,alpha:.5,c:SkyEngine.Dom({style:{color:"red"},c:"Test"})}).appendTo(SkyEngine.Screen);SkyEngine.Screen.setFilter("grayscale(100%)"),e.on("close",()=>{n.remove(),t.remove(),o.remove(),SkyEngine.Screen.removeFilter()})}}),SkyEngineShowcase.HelloSkyEngine=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Image({src:SkyEngineShowcase.R("hello.png")}).appendTo(SkyEngine.Screen);e.on("close",()=>{n.remove()})}}),SkyEngineShowcase.HitscanShootingTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=CLASS({preset:()=>{return SkyEngine.Sprite}}),t=[];REPEAT(100,()=>{t.push(n({x:500+RANDOM({min:-300,max:300}),y:RANDOM({min:-300,max:300}),scale:-.5,srcs:RUN(()=>{let e=[];return REPEAT(20,n=>{e.push(SkyEngineShowcase.R("knife/idle/survivor-idle_knife_"+n+".png"))}),e}),fps:24,collider:SkyEngine.Rect({x:-30,width:70,height:70})}).appendTo(SkyEngine.Screen))});let o=SkyEngine.StateSet({x:-500,scale:.5,stateNodes:{idle:SkyEngine.Sprite({srcs:RUN(()=>{let e=[];return REPEAT(20,n=>{e.push(SkyEngineShowcase.R("rifle/idle/survivor-idle_rifle_"+n+".png"))}),e}),fps:24}),shoot:SkyEngine.Sprite({srcs:RUN(()=>{let e=[];return REPEAT(3,n=>{e.push(SkyEngineShowcase.R("rifle/shoot/survivor-shoot_rifle_"+n+".png"))}),e}),fps:24,on:{framechange:e=>{if(0===e.getBeforeFrame()){let e,i,r=SkyEngine.Line({startX:o.getX()+65,startY:o.getY()+24,endX:o.getX()+66,endY:o.getY()+24,isEndless:!0,border:"1px solid #fff",collider:SkyEngine.Line({startX:o.getX()+65,startY:o.getY()+24,endX:o.getX()+66,endY:o.getY()+24,isEndless:!0}),on:{nextstep:n=>{n.remove(),void 0!==e&&(REMOVE({array:t,value:e}),e.remove())}}}).appendTo(SkyEngine.Screen);r.onMeet(n,n=>{let t,o=r.findIntersectionPoints(n.getCollider());EACH(o,e=>{(void 0===t||t>e.x)&&(t=e.x)}),(void 0===e||i>t)&&(i=t,e=n,r.setEndX(t),r.getCollider().setEndX(t))})}}}})},baseState:"idle"}).appendTo(SkyEngine.Screen),i=EVENT("keydown",e=>{"A"===e.getKey().toUpperCase()?o.setState("shoot"):"ArrowUp"===e.getKey()?o.moveUp(200):"ArrowDown"===e.getKey()?o.moveDown(200):"ArrowLeft"===e.getKey()?o.moveLeft(200):"ArrowRight"===e.getKey()&&o.moveRight(200)}),r=EVENT("keyup",e=>{"A"===e.getKey().toUpperCase()?o.setToState("idle"):"ArrowUp"===e.getKey()?o.stopUp():"ArrowDown"===e.getKey()?o.stopDown():"ArrowLeft"===e.getKey()?o.stopLeft():"ArrowRight"===e.getKey()&&o.stopRight()});e.on("close",()=>{o.remove(),EACH(t,e=>{e.remove()}),i.remove(),r.remove()})}}),SkyEngineShowcase.IntersectionTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Line({startX:-100,startY:-10,endX:100,endY:10,border:"5px solid red"}).appendTo(SkyEngine.Screen);n.addCollider(SkyEngine.Line({startX:-100,startY:-10,endX:100,endY:10}));let t=SkyEngine.Rect({x:-50,y:80,width:60,height:40,color:"green",scale:1.2,angle:45,on:{touchstart:()=>{console.log("This is Rect!")}}}).appendTo(SkyEngine.Screen);t.addCollider(SkyEngine.Rect({width:60,height:40}));let o=SkyEngine.Circle({x:50,y:-50,width:60,height:40,color:"green",scale:1.2,angle:45,on:{touchstart:()=>{console.log("This is Circle!")}}}).appendTo(SkyEngine.Screen);o.addCollider(SkyEngine.Circle({width:60,height:40}));let i=SkyEngine.Polygon({x:250,y:30,points:[{x:-30,y:50},{x:50,y:40},{x:20,y:-50}],color:"green",scale:.7,angle:45,on:{touchstart:()=>{console.log("This is Polygon!")}}}).appendTo(SkyEngine.Screen);i.addCollider(SkyEngine.Polygon({points:[{x:-30,y:50},{x:50,y:40},{x:20,y:-50}]}));let r=SkyEngine.Line({x:50,y:-50,startX:-100,startY:10,endX:100,endY:-10,border:"5px solid red"}).appendTo(SkyEngine.Screen);r.addCollider(SkyEngine.Line({startX:-100,startY:10,endX:100,endY:-10}));let s=[];r.onMeet(SkyEngine.Figure,e=>{EACH(r.findIntersectionPoints(e),e=>{s.push(SkyEngine.Circle({x:e.x,y:e.y,width:10,height:10,color:"yellow"}).appendTo(SkyEngine.Screen))})}),r.moveRight(100);let g=DELAY(1,()=>{r.stopRight(),r.moveDown(100),g=DELAY(1,()=>{r.stopDown(),r.moveLeft(100);let e=RAR(()=>{g=DELAY(2,()=>{r.stopLeft(),r.moveUp(100),g=DELAY(2,()=>{r.stopUp(),r.moveRight(100),g=DELAY(2,()=>{r.stopRight(),r.moveDown(100),g=DELAY(2,()=>{r.stopDown(),r.moveLeft(100),e()})})})})})})});e.on("close",()=>{n.remove(),t.remove(),o.remove(),i.remove(),r.remove(),EACH(s,e=>{e.remove()})})}}),SkyEngineShowcase.MainMenu=CLASS({preset:()=>{return VIEW},init:e=>{let n=DIV({style:{position:"fixed",left:0,top:0,width:"100%",height:"100%",overflowY:"scroll",textAlign:"center"},c:[H1({style:{marginTop:20,fontSize:30},c:"SkyEngine 쇼케이스"}),UL({style:{marginTop:20,fontSize:15,paddingBottom:20},c:[LI({c:A({c:"Hello, SkyEngine!",on:{tap:()=>{SkyEngineShowcase.GO("hello")}}})}),LI({style:{marginTop:15},c:A({c:"드로우 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/draw")}}})}),LI({style:{marginTop:15},c:A({c:"노드 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/node")}}})}),LI({style:{marginTop:15},c:A({c:"움직임 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/moving")}}})}),LI({style:{marginTop:15},c:A({c:"스케일 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/scaling")}}})}),LI({style:{marginTop:15},c:A({c:"회전 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/rotation")}}})}),LI({style:{marginTop:15},c:A({c:"페이드 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/fading")}}})}),LI({style:{marginTop:15},c:A({c:"필터 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/filter")}}})}),LI({style:{marginTop:15},c:A({c:"블렌드 모드 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/blendmode")}}})}),LI({style:{marginTop:15},c:A({c:"이벤트 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/event")}}})}),LI({style:{marginTop:15},c:A({c:"충돌 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/collision")}}})}),LI({style:{marginTop:15},c:A({c:"교점 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/intersection")}}})}),LI({style:{marginTop:15},c:A({c:"성능 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/performance")}}})}),LI({style:{marginTop:15},c:A({c:"레이캐스트 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/raycast")}}})}),LI({style:{marginTop:15},c:A({c:"슈팅 테스트 (히트스캔)",on:{tap:()=>{SkyEngineShowcase.GO("test/hitscan")}}})}),LI({style:{marginTop:15},c:A({c:"슈팅 테스트 (투사체)",on:{tap:()=>{SkyEngineShowcase.GO("test/projectile")}}})}),LI({style:{marginTop:15},c:A({c:"타일맵 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/tilemap")}}})}),LI({style:{marginTop:15},c:A({c:"파티클 테스트",on:{tap:()=>{SkyEngineShowcase.GO("test/particle")}}})})]})]}).appendTo(BODY);e.on("close",()=>{n.remove()})}}),SkyEngineShowcase.MovingTest=CLASS({preset:()=>{return VIEW},init:e=>{let n,t,o=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.5,angle:10,c:[n=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.5}),t=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.5})]}).appendTo(SkyEngine.Screen);o.moveRight(100);let i=DELAY(1,()=>{o.stopRight(),o.moveDown(100),i=DELAY(1,()=>{o.flipX(),o.stopDown(),o.moveLeft(100);let e=RAR(()=>{i=DELAY(2,()=>{o.stopLeft(),o.moveUp(100),i=DELAY(2,()=>{o.flipX(),o.stopUp(),o.moveRight(100),i=DELAY(2,()=>{o.stopRight(),o.moveDown(100),i=DELAY(2,()=>{o.flipX(),o.stopDown(),o.moveLeft(100),e()})})})})})})});n.moveTo({toX:100,accel:100}),t.moveTo({toX:100,toY:100,accel:100}),e.on("close",()=>{o.remove(),i.remove()})}}),SkyEngineShowcase.NodeTest=CLASS({preset:()=>{return VIEW},init:e=>{let n,t=SkyEngine.Rect({width:40,height:80,color:"green",c:[SkyEngine.Circle({centerY:25,y:-40,width:50,height:50,color:"yellow"}),n=SkyEngine.Rect({centerY:-30,angle:40,x:-20,y:-40,width:20,height:60,color:"purple",c:SkyEngine.Rect({centerY:-30,angle:-40,y:30,width:20,height:60,color:"purple"})}),SkyEngine.Rect({centerY:-30,angle:-40,x:20,y:-40,width:20,height:60,color:"purple",c:SkyEngine.Rect({centerY:-30,angle:40,y:30,width:20,height:60,color:"purple"})})]}).appendTo(SkyEngine.Screen);n.setScalingSpeedX(1);let o=DELAY(1,()=>{n.setScalingSpeedX(-1),o=DELAY(1,()=>{n.setScalingSpeedX(0)})});e.on("close",()=>{t.remove(),o.remove()})}}),SkyEngineShowcase.ParticleTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Particle({src:SkyEngineShowcase.R("star.png"),minCount:50,maxCount:100,minLifetime:200,maxLifetime:500,minSpeed:3,maxSpeed:7,minScale:.05,maxScale:.2,minAngle:0,maxAngle:360}).appendTo(SkyEngine.Screen),t=EVENT("touchstart",e=>{n.burst(),e.stop()});e.on("close",()=>{n.remove(),t.remove()})}}),SkyEngineShowcase.PerformanceTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Sprite({x:-500,srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.2,collider:SkyEngine.Rect({width:200,height:400})}).appendTo(SkyEngine.Screen);n.onMeet(SkyEngine.Sprite,()=>{console.log("ATTACKED!")});let t=[];REPEAT(500,()=>{let e=RANDOM({min:-100,max:100}),n=RANDOM({min:-100,max:100});t.push(SkyEngine.Sprite({src:SkyEngineShowcase.R("fireball.png"),spriteWidth:512,spriteHeight:197,fps:24,scale:.2,speedX:e,speedY:n,angle:(360+Math.round(180*Math.atan2(-n,-e)/Math.PI))%360,collider:SkyEngine.Rect({width:512,height:197})}).appendTo(SkyEngine.Screen))}),e.on("close",()=>{n.remove(),EACH(t,e=>{e.remove()})})}}),SkyEngineShowcase.ProjectileShootingTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=CLASS({preset:()=>{return SkyEngine.Sprite}}),t=[];REPEAT(100,()=>{t.push(n({x:500+RANDOM({min:-300,max:300}),y:RANDOM({min:-300,max:300}),scale:-.5,srcs:RUN(()=>{let e=[];return REPEAT(20,n=>{e.push(SkyEngineShowcase.R("knife/idle/survivor-idle_knife_"+n+".png"))}),e}),fps:24,collider:SkyEngine.Rect({x:-30,width:70,height:70})}).appendTo(SkyEngine.Screen))});let o=SkyEngine.StateSet({x:-500,scale:.5,stateNodes:{idle:SkyEngine.Sprite({srcs:RUN(()=>{let e=[];return REPEAT(20,n=>{e.push(SkyEngineShowcase.R("rifle/idle/survivor-idle_rifle_"+n+".png"))}),e}),fps:10}),shoot:SkyEngine.Sprite({srcs:RUN(()=>{let e=[];return REPEAT(3,n=>{e.push(SkyEngineShowcase.R("rifle/shoot/survivor-shoot_rifle_"+n+".png"))}),e}),fps:10,on:{framechange:e=>{if(0===e.getBeforeFrame()){let e=SkyEngine.Sprite({src:SkyEngineShowcase.R("bullet.png"),x:o.getX()+70,y:o.getY()+24,spriteWidth:16,fps:10,speedX:2e3,on:{offscreen:e=>{e.remove()}},collider:SkyEngine.Circle({width:16,height:16})}).appendTo(SkyEngine.Screen);e.onMeet(n,n=>{e.remove(),REMOVE({array:t,value:n}),n.remove()})}}}})},baseState:"idle"}).appendTo(SkyEngine.Screen),i=EVENT("keydown",e=>{"A"===e.getKey().toUpperCase()?o.setState("shoot"):"ArrowUp"===e.getKey()?o.moveUp(200):"ArrowDown"===e.getKey()?o.moveDown(200):"ArrowLeft"===e.getKey()?o.moveLeft(200):"ArrowRight"===e.getKey()&&o.moveRight(200)}),r=EVENT("keyup",e=>{"A"===e.getKey().toUpperCase()?o.setToState("idle"):"ArrowUp"===e.getKey()?o.stopUp():"ArrowDown"===e.getKey()?o.stopDown():"ArrowLeft"===e.getKey()?o.stopLeft():"ArrowRight"===e.getKey()&&o.stopRight()});e.on("close",()=>{o.remove(),EACH(t,e=>{e.remove()}),i.remove(),r.remove()})}}),SkyEngineShowcase.RaycastTest=CLASS({preset:()=>{return VIEW},init:e=>{let n,t=e=>{let n=e.x-i.getX(),t=e.y-i.getY();e.angleSquare=Math.acos(n/Math.sqrt(n*n+t*t)),e.y>i.getY()&&(e.angleSquare=Math.PI+Math.PI-e.angleSquare)},o=()=>{void 0!==n&&n.remove();let e=[{x:-SkyEngine.Screen.getWidth()/2,y:-SkyEngine.Screen.getHeight()/2},{x:SkyEngine.Screen.getWidth()/2,y:-SkyEngine.Screen.getHeight()/2},{x:SkyEngine.Screen.getWidth()/2,y:SkyEngine.Screen.getHeight()/2},{x:-SkyEngine.Screen.getWidth()/2,y:SkyEngine.Screen.getHeight()/2}];r.forEach(n=>{n.getCollider().findRaycastPoints(i.getX(),i.getY()).forEach(t=>{t.target=n,e.push(t)})}),s.forEach(n=>{n.getCollider().findRaycastPoints(i.getX(),i.getY()).forEach(t=>{t.target=n,e.push(t)})}),g.forEach(n=>{n.getCollider().findRaycastPoints(i.getX(),i.getY()).forEach(t=>{t.target=n,e.push(t)})});let o=[];e.forEach(e=>{let n=e.x,t=e.y,a=e.x-i.getX(),c=e.y-i.getY(),S=a*a+c*c;Math.abs(e.x-i.getX())<Math.abs(e.y-i.getY())?(e.x=((e.y-i.getY()<0?-999999:999999)-i.getY())/(e.y-i.getY())*(e.x-i.getX())+i.getX(),e.y=e.y-i.getY()<0?-999999:999999):(e.y=(e.y-i.getY())/(e.x-i.getX())*((e.x-i.getX()<0?-999999:999999)-i.getX())+i.getY(),e.x=e.x-i.getX()<0?-999999:999999);let y,E;EACH(SkyEngine.Line.findRectIntersectionPoints(0,0,i.getX(),i.getY(),e.x,e.y,1,1,0,1,0,0,SkyEngine.Screen.getWidth(),SkyEngine.Screen.getHeight(),1,1,0,1),e=>{let n=e.x-i.getX(),t=e.y-i.getY();y=n*n+t*t,E=e}),r.forEach(n=>{if(e.target!==n){let t=n.getCollider();EACH(SkyEngine.Line.findCircleIntersectionPoints(0,0,i.getX(),i.getY(),e.x,e.y,1,1,0,1,t.getDrawingX(),t.getDrawingY(),t.getWidth(),t.getHeight(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos()),e=>{let n=e.x-i.getX(),t=e.y-i.getY(),o=n*n+t*t;o<y&&(y=o,E=e)})}}),s.forEach(n=>{if(e.target!==n){let t=n.getCollider();EACH(SkyEngine.Line.findRectIntersectionPoints(0,0,i.getX(),i.getY(),e.x,e.y,1,1,0,1,t.getDrawingX(),t.getDrawingY(),t.getWidth(),t.getHeight(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos()),e=>{let n=e.x-i.getX(),t=e.y-i.getY(),o=n*n+t*t;o<y&&(y=o,E=e)})}}),g.forEach(n=>{if(e.target!==n){let t=n.getCollider();EACH(SkyEngine.Line.findPolygonIntersectionPoints(0,0,i.getX(),i.getY(),e.x,e.y,1,1,0,1,t.getDrawingX(),t.getDrawingY(),t.getPoints(),t.getRealScaleX(),t.getRealScaleY(),t.getRealSin(),t.getRealCos()),e=>{let n=e.x-i.getX(),t=e.y-i.getY(),o=n*n+t*t;o<y&&(y=o,E=e)})}}),void 0!==E&&(o.push(E),void 0!==e.target&&S<y&&o.push({x:(2*n+e.target.getX())/3,y:(2*t+e.target.getY())/3}))}),o.sort((e,n)=>{return void 0===e.angleSquare&&t(e),void 0===n.angleSquare&&t(n),e.angleSquare-n.angleSquare});let a=SkyEngine.Screen.getCanvasContext().createRadialGradient(i.getX(),i.getY(),0,i.getX(),i.getY(),500);a.addColorStop(0,"#FFCC00"),a.addColorStop(1,"rgba(0, 0, 0, 0)"),n=SkyEngine.Polygon({points:o,color:a,z:-1}).appendTo(SkyEngine.Screen),n.setFilter("blur(2px)")},i=SkyEngine.Sprite({src:SkyEngineShowcase.R("torch.png"),spriteWidth:32,fps:10,on:{move:()=>{o()}}}).appendTo(SkyEngine.Screen),r=[];REPEAT(10,()=>{r.push(SkyEngine.Image({src:SkyEngineShowcase.R("ball.png"),x:RANDOM({min:-600,max:600}),y:RANDOM({min:-300,max:300}),scale:.2,collider:SkyEngine.Circle({width:99,height:96})}).appendTo(SkyEngine.Screen))});let s=[];REPEAT(10,()=>{s.push(SkyEngine.Image({src:SkyEngineShowcase.R("box.png"),x:RANDOM({min:-600,max:600}),y:RANDOM({min:-300,max:300}),scale:.05,collider:SkyEngine.Rect({width:512,height:512})}).appendTo(SkyEngine.Screen))});let g=[];REPEAT(10,()=>{g.push(SkyEngine.Image({src:SkyEngineShowcase.R("star.png"),x:RANDOM({min:-600,max:600}),y:RANDOM({min:-300,max:300}),scale:.1,collider:SkyEngine.Polygon({points:[{x:0,y:-100},{x:50,y:-38},{x:100,y:-26},{x:63,y:26},{x:65,y:100},{x:0,y:70},{x:-65,y:100},{x:-63,y:26},{x:-100,y:-26},{x:-50,y:-38}]})}).appendTo(SkyEngine.Screen))}),o();let a=EVENT("keydown",e=>{"A"===e.getKey().toUpperCase()?i.setState("shoot"):"ArrowUp"===e.getKey()?i.moveUp(200):"ArrowDown"===e.getKey()?i.moveDown(200):"ArrowLeft"===e.getKey()?i.moveLeft(200):"ArrowRight"===e.getKey()&&i.moveRight(200)}),c=EVENT("keyup",e=>{"A"===e.getKey().toUpperCase()?i.setToState("idle"):"ArrowUp"===e.getKey()?i.stopUp():"ArrowDown"===e.getKey()?i.stopDown():"ArrowLeft"===e.getKey()?i.stopLeft():"ArrowRight"===e.getKey()&&i.stopRight()});e.on("close",()=>{i.remove(),EACH(r,e=>{e.remove()}),EACH(s,e=>{e.remove()}),EACH(g,e=>{e.remove()}),void 0!==n&&n.remove(),a.remove(),c.remove()})}}),SkyEngineShowcase.RotationTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scale:.5}).appendTo(SkyEngine.Screen);n.rotateTo({speed:360,toAngle:360}),e.on("close",()=>{n.remove()})}}),SkyEngineShowcase.ScalingTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.Sprite({srcs:[SkyEngineShowcase.R("robot/run1.png"),SkyEngineShowcase.R("robot/run2.png"),SkyEngineShowcase.R("robot/run3.png"),SkyEngineShowcase.R("robot/run4.png"),SkyEngineShowcase.R("robot/run5.png"),SkyEngineShowcase.R("robot/run6.png"),SkyEngineShowcase.R("robot/run7.png"),SkyEngineShowcase.R("robot/run8.png")],fps:10,scalingAccel:-1,toScale:0}).appendTo(SkyEngine.Screen);e.on("close",()=>{n.remove()})}}),SkyEngineShowcase.TileMapTest=CLASS({preset:()=>{return VIEW},init:e=>{let n=SkyEngine.TileMap({x:-400,centerX:112,centerY:112,tileWidth:32,tileHeight:32,tileKeySet:{grass:SkyEngine.Image({src:SkyEngineShowcase.R("tile/grass.png")}),dirt:SkyEngine.Image({src:SkyEngineShowcase.R("tile/dirt.png")}),stone:SkyEngine.Image({src:SkyEngineShowcase.R("tile/stone.png")})},tileKeyMap:[["grass","dirt","grass","grass","grass","grass","grass","grass"],["grass","dirt","grass","dirt","dirt","dirt","grass","grass"],["grass","dirt","grass","dirt","grass","dirt","grass","grass"],["grass","dirt","grass","dirt","grass","dirt","grass","grass"],["grass","dirt","grass","dirt","grass","dirt","dirt","dirt"],["grass","dirt","grass","dirt","grass","grass","grass","grass"],["grass","dirt","dirt","dirt","grass","stone","stone","stone"],["grass","grass","grass","grass","grass","stone","stone","stone"]],collisionMap:[[1,0,1,1,1,1,1,1],[1,0,1,0,0,0,1,1],[1,0,1,0,1,0,1,1],[1,0,1,0,1,0,1,1],[1,0,1,0,1,0,0,0],[1,0,1,0,1,1,1,1],[1,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1]]}).appendTo(SkyEngine.Screen),t=n.findPath({startRow:0,startCol:1,endRow:4,endCol:7});EACH(t,e=>{console.log(e.row,e.col)});let o=SkyEngine.IsomatricTileMap({centerX:256,centerY:132,scale:.8,tileWidth:64,tileHeight:33,tileKeySet:{grass:SkyEngine.Image({centerY:10,src:SkyEngineShowcase.R("tile/igrass.png")}),water:SkyEngine.Image({centerY:16,src:SkyEngineShowcase.R("tile/iwater.png")}),sand:SkyEngine.Image({centerY:16,src:SkyEngineShowcase.R("tile/isand.png")})},tileKeyMap:[["grass","grass","grass","grass","grass","grass","grass","grass"],["grass","grass","grass","grass","grass","grass","grass","grass"],["sand","grass","grass","grass","grass","grass","grass","grass"],["sand","grass","grass","grass","grass","grass","grass","grass"],["water","sand","grass","grass","grass","grass","grass","grass"],["water","sand","grass","grass","grass","grass","grass","grass"],["water","sand","grass","grass","grass","grass","grass","grass"],["water","sand","grass","grass","grass","grass","grass","grass"],["water","water","sand","sand","grass","grass","grass","grass"],["water","water","sand","sand","grass","grass","grass","grass"],["water","water","water","water","sand","grass","grass","grass"],["water","water","water","water","sand","grass","grass","grass"],["water","water","water","water","water","sand","sand","grass"],["water","water","water","water","water","sand","sand","sand"],["water","water","water","water","water","water","water","sand"],["water","water","water","water","water","water","water","water"],["water","water","water","water","water","water","water","water"],["water","water","water","water","water","water","water","water"]],collisionMap:[[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]]}).appendTo(SkyEngine.Screen),i=SkyEngine.HexagonTileMap({x:400,scale:.35,centerX:385,centerY:339.5,tileWidth:110,tileHeight:128,overlapHeight:31,tileKeySet:{grass:SkyEngine.Image({src:SkyEngineShowcase.R("tile/hgrass.png")}),water:SkyEngine.Image({src:SkyEngineShowcase.R("tile/hwater.png")}),sand:SkyEngine.Image({src:SkyEngineShowcase.R("tile/hsand.png")}),mountain:SkyEngine.Image({src:SkyEngineShowcase.R("tile/hmountain.png")}),fire:SkyEngine.Image({src:SkyEngineShowcase.R("tile/hfire.png")})},tileKeyMap:[["sand","water","sand","grass","grass","grass","mountain","mountain"],["sand","water","sand","water","water","water","grass","mountain"],["sand","water","sand","water","grass","water","grass","grass"],["sand","water","grass","water","grass","water","grass","grass"],["sand","water","grass","water","grass","water","water","water"],["grass","water","grass","water","grass","grass","grass","grass"],["grass","water","water","water","grass","grass","fire","fire"],["grass","grass","grass","grass","grass","fire","fire","fire"]],collisionMap:[[1,0,1,1,1,1,1,1],[1,0,1,0,0,0,1,1],[1,0,1,0,1,0,1,1],[1,0,1,0,1,0,1,1],[1,0,1,0,1,0,0,0],[1,0,1,0,1,1,1,1],[1,0,0,0,1,1,1,1],[1,1,1,1,1,1,1,1]]}).appendTo(SkyEngine.Screen);e.on("close",()=>{n.remove(),o.remove(),i.remove()})}});